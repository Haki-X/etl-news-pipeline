# prefect.yaml (Final Correct Version)

name: etl-news-pipeline

deployments:
- name: daily-news-run
  description: "Runs the daily news ETL pipeline from GitHub"
  entrypoint: flow.py:etl_news_pipeline_flow
  work_pool:
    name:daily-news-worker # Make sure this matches your work pool name

  # 'pull' defines the steps the worker takes before running the flow
  pull:
    # Step 1: Clone the code from your GitHub repository
    - prefect.deployments.steps.git_clone:
        repository: https://github.com/Haki-X/etl-news-pipeline.git
        branch: main

    # Step 2: Install all libraries from requirements.txt
    - prefect.deployments.steps.pip_install_requirements:
        requirements_file: requirements.txt