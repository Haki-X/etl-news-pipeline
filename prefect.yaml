# prefect.yaml (Versi FINAL dengan Docker)

name: etl-news-pipeline
prefect-version: 3.4.10 # Atau versi Anda

# BAGIAN BARU: 'build' memberitahu Prefect cara membuat gambar Docker
build:
  - prefect_docker.deployments.steps.build_docker_image:
      image_name: Haki-X/etl-news-pipeline # Ganti dengan "username_anda/nama_proyek"
      tag: latest
      dockerfile: Dockerfile

# 'pull' tidak lagi diperlukan karena kode sudah ada di dalam gambar Docker
pull:
   - prefect.deployments.steps.pip_install_requirements:
        requirements_file: requirements.txt

deployments:
- name: daily-news-run
  entrypoint: flow.py:etl_news_pipeline_flow
  work_pool:
    name: daily-news-worker # Pastikan ini nama work pool Anda