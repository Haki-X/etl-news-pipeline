# prefect.yaml (Versi FINAL yang Paling Benar)

# Nama proyek Anda
name: etl-news-pipeline

# Tentukan deployment Anda
deployments:
- name: daily-news-run-
  description: Menjalankan pipeline ETL berita harian dari Github
  entrypoint: flow.py:etl_news_pipeline_flow
  work_pool:
    name: daily-news-worker
  schedule:
    cron: "0 8 * * *"
    timezone: "Asia/Jakarta"
  
  # 'pull' mendefinisikan langkah-langkah yang dijalankan oleh worker
  # sebelum mengeksekusi flow Anda.
  pull:
    # Langkah 1: Unduh kode dari GitHub
    - prefect.deployments.steps.git_clone:
        repository: https://github.com/Haki-X/etl-news-pipeline.git
        branch: main

    # Langkah 2: Instal semua library yang dibutuhkan
    - prefect.deployments.steps.pip_install_requirements:
        requirements_file: requirements.txt