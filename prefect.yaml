# prefect.yaml (Versi FINAL yang Paling Sederhana dan Benar)

name: etl-news-pipeline # Menggunakan nama repo, bukan nama folder
prefect-version: 3.4.10

build: null
push: null

pull:
- prefect.deployments.steps.git_clone:
    repository: https://github.com/Haki-X/etl-news-pipeline.git # Your repo URL
    branch: main


- prefect.deployments.steps.pip_install:
    requirements_file: requirements.txt


deployments:
- name: daily-news-run
  version: "1.0"
  description: "Menjalankan pipeline ETL berita harian dari Github"
  flow_name: etl_news_pipeline_flow
  # ENTRYPOINT SEKARANG SANGAT SEDERHANA:
  entrypoint: flow.py:etl_news_pipeline_flow
  parameters: {}
  work_pool:
    name: daily-news-worker 
  schedule:
    cron: "0 8 * * *"
    timezone: "Asia/Jakarta"