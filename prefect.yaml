# prefect.yaml (Versi FINAL yang Paling Benar)

name: etl-news-pipeline
prefect-version: 3.4.10 # Atau versi Anda

deployments:
- name: daily-news-run
  description: Menjalankan pipeline ETL berita harian dari Github
  entrypoint: flow.py:etl_news_pipeline_flow
  work_pool:
    name: daily-news-worker # Pastikan ini nama work pool Anda

  pull:
    # Langkah 1: Unduh kode dari GitHub
    - prefect.deployments.steps.git_clone:
        repository: https://github.com/Haki-X/etl-news-pipeline.git
        branch: main

    # Langkah 2: Instal semua library yang dibutuhkan
    - prefect.deployments.steps.pip_install_requirements:
        requirements_file: requirements.txt