# prefect.yaml (Versi Final yang Benar)

name: etl_portofolio
prefect-version: 3.4.10

build: null
push: null

# 'pull' sekarang memiliki dua langkah
pull:
- prefect.deployments.steps.git_clone:
    repository: https://github.com/Haki-X/etl-news-pipeline.git
    branch: main

# LANGKAH BARU: Pindah ke dalam folder etl_portofolio
- prefect.deployments.steps.set_working_dir:
    directory: etl_portofolio

deployments:
- name: daily-news-run
  version: "1.0"
  description: "Menjalankan pipeline ETL berita harian dari Github"
  flow_name: etl_news_pipeline_flow
  # 'entrypoint' sekarang lebih sederhana karena kita sudah berada di folder yang benar
  entrypoint: flow.py:etl_news_pipeline_flow
  parameters: {}
  work_pool:
    name: my-process-pool # Ganti jika nama work pool Anda berbeda
  schedule:
    cron: "0 8 * * *"
    timezone: "Asia/Jakarta"